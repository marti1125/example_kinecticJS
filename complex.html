<!DOCTYPE html>
<html>
<head>
	<title>Custom</title>
	<style type="text/css">
	body {
		margin: 0px;
		padding: 0px;
	}
	canvas {
		border: 1px solid #9c9898;
	}
	</style>
</head>
<body>
	<div id="container"></div>
<script type="text/javascript" src="kinetic-v4.0.1.js"></script>
<script type="text/javascript">
	window.onload = function() {
		var stage = new Kinetic.Stage({
			container: "container",
			width: 578,
			height: 200
		});

		var shapesLayer = new Kinetic.Layer();

		/*
		 * create a group which will be used to combine
		 * multiple simple shapes. Transforming the group will
		 * transform all of the simple shapes together as
		 * one unit
		 */

		var group = new Kinetic.Group({
			x: 220,
			y: 40,
			rotationDeg: 20
		});

		var colors = ["red", "orange", "yellow"];

		for(var n = 0; n < 3; n++){
			// anonymous function to induce scope
			(function() {
				var i = n;
				var box = new Kinetic.Rect({
					x: i * 30,
					y: i * 18,
					width: 100,
					height: 50,
					name: colors[i],
					fill: colors[i],
					stroke: "black",
					strokeWidth: 4
				});
				group.add(box);
			})();
		}

		// add the shape to the layer
		shapesLayer.add(group);

		// add the layer to the stage
		stage.add(shapesLayer);
	};
</script>
</body>
</html>